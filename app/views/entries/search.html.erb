<%= render 'shared/navbar_lateral' %>
<div class="page-container">
  <div class="content-container">
    <div class="search-bar">
      <%= form_tag search_path, method: :get do %>
        <div class="search-theme">
          <%= text_field_tag :query,
            params[:query],
            class: "form-control",
            placeholder: "Search by theme"
          %>
        </div>
        <div class="search-icons">
          <%= check_box_tag("categories[]", "Prediction" , params[:categories].present? && params[:categories].include?("Prediction") ? true : false, onchange: 'this.form.submit()', id: "category-prediction") %>
          <label for="category-prediction" title="Predictions"><span class="iconify " data-icon="fluent:predictions-20-regular"></span></label>
          <%= check_box_tag("categories[]", "Event", params[:categories].present? && params[:categories].include?("Event") ? true : false, onchange: 'this.form.submit()', id: "category-event")%>
          <label for="category-event" title="Events"><span class="iconify" data-icon="bx:party"></span></label>
          <%= check_box_tag("categories[]", "Thought", params[:categories].present? && params[:categories].include?("Thought") ? true : false, onchange: 'this.form.submit()', id: "category-thought") %>
          <label for="category-thought" title="Thoughts"><span class="iconify" data-icon="fluent:thinking-24-regular"></span></label>
          <%= check_box("", :question_day, {checked: params[:question_day] == "true" ? true : false, onchange: 'this.form.submit()'}, true, false) %>
          <label for="question_day" title="Questions of the Day"><span class="iconify" data-icon="fluent:calendar-question-mark-16-regular"></span></label>
          <!--<input type="text" name="start_date" value="<%= params[:start_date] %>" onchange='this.form.submit()'>-->
        </div>
      <% end %>
    </div>
    <% @entries.each do |entry| %>
      <div class="card-search">
        <div class="title-date d-flex">
          <div class="title-search" title="Theme">
            <h6 title="Category"><%= entry.category.category %>&nbsp<%= "& Question of the Day" if entry.question_day %></h6>
            <h3 title="Theme"><%= entry.theme %></h3>
          </div>
          <div class="date-search d-flex">
          <div class="myDIV"><p><i class="fa-solid fa-pen-to-square"></i>&nbsp<%= entry.created_at.strftime("%d-%b-%Y") %></p></div>
          <div class="hide">Creation Date</div>
          <div class="myDIV">
            <p><i class="fa-solid fa-calendar-check"></i>&nbsp<%= entry.remember_date.strftime("%d-%b-%Y") %></p>
          </div>
          <div class="hide">Predicted Date</div>
          </div>
        </div>
        <div class="comment-share d-flex">
          <div class="comment-search" title="Comment"><%= entry.comment %></div>
            <!-- Button trigger modal -->
            <button type="button" class="share-search button-share" data-bs-toggle="modal" data-bs-target="#exampleModal<%= entry.id %>">
              <div class="share-search" title="Share"><i class="fa-solid fa-share-nodes"></i></div>
            </button>
        </div>
      </div>
      <!-- Modal -->
<div class="modal fade" id="exampleModal<%= entry.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Copy this text for sharing</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p><%= entry.comment %></p>
        <p>Creation Date: <%= entry.created_at.strftime("%d-%b-%Y") %></p>
        <p>Predicted Date: <%= entry.remember_date.strftime("%d-%b-%Y") %></p>
        <p>#Futurapp #<%= entry.theme.gsub(/\s+/, '') %> #<%= entry.theme.gsub(/\s+/, '') %>Futurapp</p>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
    <% end %>
  </div>
</div>
